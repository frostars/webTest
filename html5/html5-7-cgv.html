<meta charset="utf-8" />
<title>HTML5-定位API</title>
<script src="http://api.map.baidu.com/api?key=&v=1.1&service=true" ></script>
<div id="dituContent" style="width:500;height:300;border:1px solid #ccc;"></div>
<script>
//是否支持定位
if(navigator.geolocation){
	navigator.geolocation.getCurrentPosition(
		function(position){
			//获取经纬度
			var latitude = position.coords.latitude;//纬度
			var longitude = position.coords.longitude;//经度
			//alert('经度：' + latitude + '纬度：' + longitude);
			createMap(latitude,longitude)
		},
		function(error){
			var message = '错误编号：' + error.code + '\n错误信息' + error.message;
			alert(message);
		}
	);
} else{
	alert('不支持定位');
}

function createMap(a,b){
	var map = new BMap.Map('dituContent');//在容器中创建百度地图
	var point = new BMap.Point(b,a);//定义一个中心店（经度、纬度）
	map.centerAndZoom(point,20);
	window.map = map;//将map变量存储用于全局
};
</script>